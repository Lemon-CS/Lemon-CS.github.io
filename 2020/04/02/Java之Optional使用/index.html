<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Java之Optional使用 | Lemon-CS</title><meta name="keywords" content="Optional"><meta name="author" content="空白格"><meta name="copyright" content="空白格"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Java之Optional的介绍和实践"><meta property="og:type" content="article"><meta property="og:title" content="Java之Optional使用"><meta property="og:url" content="https://lemon-cs.github.io/2020/04/02/Java%E4%B9%8BOptional%E4%BD%BF%E7%94%A8/index.html"><meta property="og:site_name" content="Lemon-CS"><meta property="og:description" content="Java之Optional的介绍和实践"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://static01.imgkr.com/temp/7e2ff0bcacb94fe1a60c065dd5773565.jpg"><meta property="article:published_time" content="2020-04-02T03:59:35.000Z"><meta property="article:modified_time" content="2022-01-24T17:16:15.708Z"><meta property="article:author" content="空白格"><meta property="article:tag" content="Java"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://static01.imgkr.com/temp/7e2ff0bcacb94fe1a60c065dd5773565.jpg"><link rel="shortcut icon" href="https://gitee.com/lemon-cs/images/raw/master/Blog.png"><link rel="canonical" href="https://lemon-cs.github.io/2020/04/02/Java%E4%B9%8BOptional%E4%BD%BF%E7%94%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:300},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: 空白格",link:"链接: ",source:"来源: Lemon-CS",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Java之Optional使用",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-01-25 01:16:15"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,c={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(c))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!o&&!a&&!c;if(void 0===t){if(a)activateLightMode();else if(o)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const i=saveToLocal.get("aside-status");void 0!==i&&("hide"===i?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const d=saveToLocal.get("global-font-size");void 0!==d&&document.documentElement.style.setProperty("--global-font-size",d+"px");const r=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};r(),document.addEventListener("pjax:complete",r)})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/constown/HexoCustomFile@0.0.4/dist/css/custom.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./images/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://static01.imgkr.com/temp/7e2ff0bcacb94fe1a60c065dd5773565.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lemon-CS</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java之Optional使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-02T03:59:35.000Z" title="发表于 2020-04-02 11:59:35">2020-04-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-24T17:16:15.708Z" title="更新于 2022-01-25 01:16:15">2022-01-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Java之Optional使用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Java之Optional判空"><a href="#Java之Optional判空" class="headerlink" title="Java之Optional判空"></a>Java之Optional判空</h1><h2 id="1-什么是Optional？"><a href="#1-什么是Optional？" class="headerlink" title="1-什么是Optional？"></a>1-什么是Optional？</h2><p>简单来说，Opitonal类就是Java提供的为了解决大家平时判断对象是否为空用 会用 null!=obj 这样的方式存在的判断，从而令人头疼导致NPE（Null Pointer Exception 空指针异常），同时Optional的存在可以让代码更加简单，可读性跟高，代码写起来更高效。</p><p><strong>常规判断：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对象 人</span></span><br><span class="line"><span class="comment">//属性有 name，age</span></span><br><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">null</span>==person)&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;person为null&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> person;</span><br></pre></td></tr></table></figure><p><strong>使用Optional：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对象 人</span></span><br><span class="line"><span class="comment">//属性有 name，age</span></span><br><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(person).orElse(<span class="string">&quot;person为null&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>测试展示类Person代码：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Java 8 之前，任何访问对象方法或属性的调用都可能导致 <em>NullPointerException</em>：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String isocode = user.getAddress().getCountry().getIsocode().toUpperCase();</span><br></pre></td></tr></table></figure><p>在这个小示例中，如果我们需要确保不触发异常，就得在访问每一个值之前对其进行明确地检查：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">    Address address = user.getAddress();</span><br><span class="line">    <span class="keyword">if</span> (address != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Country country = address.getCountry();</span><br><span class="line">        <span class="keyword">if</span> (country != <span class="keyword">null</span>) &#123;</span><br><span class="line">            String isocode = country.getIsocode();</span><br><span class="line">            <span class="keyword">if</span> (isocode != <span class="keyword">null</span>) &#123;</span><br><span class="line">                isocode = isocode.toUpperCase();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这很容易就变得冗长，难以维护。</p><h2 id="2-Optional对象创建"><a href="#2-Optional对象创建" class="headerlink" title="2-Optional对象创建"></a>2-Optional对象创建</h2><p>首先我们先打开Optional的内部,去一探究竟 先把几个创建Optional对象的方法提取出来</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Optional</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Optional&lt;?&gt; EMPTY = <span class="keyword">new</span> Optional&lt;&gt;();</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> T value;</span><br><span class="line">   <span class="comment">//我们可以看到两个构造方格都是private 私有的</span></span><br><span class="line">   <span class="comment">//说明 我们没办法在外面去new出来Optional对象</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">Optional</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">Optional</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = Objects.requireNonNull(value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这个静态方法大致 是创建出一个包装值为空的一个对象因为没有任何参数赋值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; Optional&lt;T&gt; <span class="title">empty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        Optional&lt;T&gt; t = (Optional&lt;T&gt;) EMPTY;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这个静态方法大致 是创建出一个包装值非空的一个对象 因为做了赋值</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Optional&lt;T&gt; <span class="title">of</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Optional&lt;&gt;(value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这个静态方法大致是 如果参数value为空，则创建空对象，如果不为空，则创建有参对象</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Optional&lt;T&gt; <span class="title">ofNullable</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value == <span class="keyword">null</span> ? empty() : of(value);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>再做一个简单的实例展示 与上面对应</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、创建一个包装对象值为空的Optional对象</span></span><br><span class="line">Optional&lt;String&gt; optEmpty = Optional.empty();</span><br><span class="line"><span class="comment">// 2、创建包装对象值非空的Optional对象</span></span><br><span class="line">Optional&lt;String&gt; optOf = Optional.of(<span class="string">&quot;optional&quot;</span>);</span><br><span class="line"><span class="comment">// 3、创建包装对象值允许为空也可以不为空的Optional对象</span></span><br><span class="line">Optional&lt;String&gt; optOfNullable1 = Optional.ofNullable(<span class="keyword">null</span>);</span><br><span class="line">Optional&lt;String&gt; optOfNullable2 = Optional.ofNullable(<span class="string">&quot;optional&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="2-1-Optional-get-方法-返回对象的值"><a href="#2-1-Optional-get-方法-返回对象的值" class="headerlink" title="2.1-Optional.get()方法(返回对象的值)"></a>2.1-Optional.get()方法(返回对象的值)</h3><p>get()方法是返回一个option的实例值 源码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">&quot;No value present&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也就是如果value不为空则做返回，如果为空则抛出异常 “No value present” 简单实例展示</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line">Optional.ofNullable(person).get();</span><br></pre></td></tr></table></figure><h3 id="2-2-Optional-isPresent-方法-判读是否为空"><a href="#2-2-Optional-isPresent-方法-判读是否为空" class="headerlink" title="2.2-Optional.isPresent()方法(判读是否为空)"></a>2.2-Optional.isPresent()方法(判读是否为空)</h3><p>isPresent()方法就是会返回一个boolean类型值，如果对象不为空则为真，如果为空则false 源码:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">isPresent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简单的实例展示:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (Optional.ofNullable(person).isPresent())&#123;</span><br><span class="line">    <span class="comment">//写不为空的逻辑</span></span><br><span class="line">    System.out.println(<span class="string">&quot;不为空&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//写为空的逻辑</span></span><br><span class="line">    System.out.println(<span class="string">&quot;为空&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-Optional-ifPresent-方法-判读是否为空并返回函数"><a href="#2-3-Optional-ifPresent-方法-判读是否为空并返回函数" class="headerlink" title="2.3-Optional.ifPresent()方法(判读是否为空并返回函数)"></a>2.3-Optional.ifPresent()方法(判读是否为空并返回函数)</h3><p>这个意思是如果对象非空，则运行函数体 源码:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ifPresent</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; consumer)</span> </span>&#123;</span><br><span class="line">      <span class="comment">//如果value不为空，则运行accept方法体</span></span><br><span class="line">      <span class="keyword">if</span> (value != <span class="keyword">null</span>)</span><br><span class="line">          consumer.accept(value);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>看实例：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line">Optional.ofNullable(person).ifPresent(p -&gt; System.out.println(<span class="string">&quot;年龄&quot;</span>+p.getAge()));</span><br></pre></td></tr></table></figure><p>如果对象不为空，则会打印这个年龄，因为内部已经做了NPE（非空判断），所以就不用担心空指针异常了。</p><h3 id="2-4-Optional-filter-方法-过滤对象"><a href="#2-4-Optional-filter-方法-过滤对象" class="headerlink" title="2.4-Optional.filter()方法(过滤对象)"></a>2.4-Optional.filter()方法(过滤对象)</h3><p>filter()方法大致意思是，接受一个对象，然后对他进行条件过滤，如果条件符合则返回Optional对象本身，如果不符合则返回空Optional</p><p>源码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Optional&lt;T&gt; <span class="title">filter</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; predicate)</span> </span>&#123;</span><br><span class="line">    Objects.requireNonNull(predicate);</span><br><span class="line">    <span class="comment">//如果为空直接返回this</span></span><br><span class="line">    <span class="keyword">if</span> (!isPresent())</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>; <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//判断返回本身还是空Optional</span></span><br><span class="line">    <span class="keyword">return</span> predicate.test(value) ? <span class="keyword">this</span> : empty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简单实例：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line">Optional.ofNullable(person).filter(p -&gt; p.getAge()&gt;<span class="number">50</span>);</span><br></pre></td></tr></table></figure><h3 id="2-5-Optional-map-方法-对象进行二次包装"><a href="#2-5-Optional-map-方法-对象进行二次包装" class="headerlink" title="2.5- Optional.map()方法(对象进行二次包装)"></a>2.5- Optional.map()方法(对象进行二次包装)</h3><p>map()方法将对应Funcation函数式接口中的对象，进行二次运算，封装成新的对象然后返回在Optional中 源码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>&lt;U&gt; Optional&lt;U&gt; <span class="title">map</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends U&gt; mapper)</span> </span>&#123;</span><br><span class="line">       Objects.requireNonNull(mapper);</span><br><span class="line">       <span class="comment">//如果为空返回自己</span></span><br><span class="line">       <span class="keyword">if</span> (!isPresent())</span><br><span class="line">           <span class="keyword">return</span> empty();</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">//否则返回用方法修饰过的Optional</span></span><br><span class="line">           <span class="keyword">return</span> Optional.ofNullable(mapper.apply(value));</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>实例展示：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person1=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line">String optName = Optional.ofNullable(person).map(p -&gt; person.getName()).orElse(<span class="string">&quot;name为空&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="2-6-Optional-flatMap-方法-Optional对象进行二次包装"><a href="#2-6-Optional-flatMap-方法-Optional对象进行二次包装" class="headerlink" title="2.6-Optional.flatMap()方法(Optional对象进行二次包装)"></a>2.6-Optional.flatMap()方法(Optional对象进行二次包装)</h3><p>map()方法将对应<code>Optional&lt; Funcation &gt;</code>函数式接口中的对象，进行二次运算，封装成新的对象然后返回在Optional中 源码:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>&lt;U&gt; Optional&lt;U&gt; <span class="title">flatMap</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, Optional&lt;U&gt;&gt; mapper)</span> </span>&#123;</span><br><span class="line">    Objects.requireNonNull(mapper);</span><br><span class="line">    <span class="keyword">if</span> (!isPresent())</span><br><span class="line">                <span class="keyword">return</span> empty(); <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.requireNonNull(mapper.apply(value));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setAge(<span class="number">2</span>);</span><br><span class="line">Optional&lt;Object&gt; optName = Optional.ofNullable(person).map(p -&gt; Optional.ofNullable(p.getName()).orElse(<span class="string">&quot;name为空&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="2-7-Optional-orElse-方法-为空返回对象"><a href="#2-7-Optional-orElse-方法-为空返回对象" class="headerlink" title="2.7-Optional.orElse()方法(为空返回对象)"></a>2.7-Optional.orElse()方法(为空返回对象)</h3><p>常用方法之一，这个方法意思是如果包装对象为空的话，就执行orElse方法里的value，如果非空，则返回写入对象 源码:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">orElse</span><span class="params">(T other)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果非空，返回value，如果为空，返回other</span></span><br><span class="line">    <span class="keyword">return</span> value != <span class="keyword">null</span> ? value : other;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-8-Optional-orElseGet-方法-为空返回Supplier对象"><a href="#2-8-Optional-orElseGet-方法-为空返回Supplier对象" class="headerlink" title="2.8-Optional.orElseGet()方法(为空返回Supplier对象)"></a>2.8-Optional.orElseGet()方法(为空返回Supplier对象)</h3><p>这个与orElse很相似，入参不一样，入参为Supplier对象，为空返回传入对象的.get()方法，如果非空则返回当前对象 源码:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">orElseGet</span><span class="params">(Supplier&lt;? extends T&gt; other)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value != <span class="keyword">null</span> ? value : other.get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Optional&lt;Supplier&lt;Person&gt;&gt; sup=Optional.ofNullable(Person::<span class="keyword">new</span>);</span><br><span class="line"><span class="comment">//调用get()方法，此时才会调用对象的构造方法，即获得到真正对象</span></span><br><span class="line">Optional.ofNullable(person).orElseGet(sup.get());</span><br></pre></td></tr></table></figure><p>说真的对于Supplier对象我也懵逼了一下，去网上简单查阅才得知 Supplier也是创建对象的一种方式,简单来说，Suppiler是一个接口，是类似Spring的懒加载，声明之后并不会占用内存，只有执行了get()方法之后，才会调用构造方法创建出对象创建对象的语法的话就是<code>Supplier supPerson= Person::new;</code>需要使用时<code>supPerson.get()</code>即可.</p><h3 id="2-9-Optional-orElseThrow-方法-为空返回异常"><a href="#2-9-Optional-orElseThrow-方法-为空返回异常" class="headerlink" title="2.9-Optional.orElseThrow()方法(为空返回异常)"></a>2.9-Optional.orElseThrow()方法(为空返回异常)</h3><p>方法作用的话就是如果为空，就抛出你定义的异常，如果不为空返回当前对象，在实战中所有异常肯定是要处理好的，为了代码的可读性</p><p>源码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;X extends Throwable&gt; <span class="function">T <span class="title">orElseThrow</span><span class="params">(Supplier&lt;? extends X&gt; exceptionSupplier)</span> <span class="keyword">throws</span> X </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> exceptionSupplier.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例：这个就贴实战源码了</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//简单的一个查询</span></span><br><span class="line">Member member = memberService.selectByPhone(request.getPhone());</span><br><span class="line">Optional.ofNullable(member).orElseThrow(() -&gt; <span class="keyword">new</span> ServiceException(<span class="string">&quot;没有查询的相关数据&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="2-10-相似方法进行对比分析"><a href="#2-10-相似方法进行对比分析" class="headerlink" title="2.10-相似方法进行对比分析"></a>2.10-相似方法进行对比分析</h3><p>可能小伙伴看到这，没用用过的话会觉得orElse()和orElseGet()还有orElseThrow()很相似，map()和flatMap()好相似</p><p>哈哈哈不用着急，都是从这一步过来的，我再给大家总结一下不同方法的异同点</p><p><strong>orElse()和orElseGet()和orElseThrow()的异同点</strong></p><p>方法效果类似，如果对象不为空，则返回对象，如果为空，则返回方法体中的对应参数，所以可以看出这三个方法体中参数是不一样的</p><ul><li>orElse（T 对象）</li><li>orElseGet（Supplier &lt; T &gt;对象）</li><li>orElseThrow（异常）</li></ul><p><strong>map()和orElseGet的异同点</strong></p><ul><li>方法效果类似，对方法参数进行二次包装，并返回,入参不同</li><li>map（function函数）</li><li>flatmap（Optional&lt; function &gt;函数）</li></ul><p>具体要怎么用，要根据业务场景以及代码规范来定义，下面可以简单看一下我在实战中怎用使用神奇的Optional</p><h2 id="3-Optional实战"><a href="#3-Optional实战" class="headerlink" title="3-Optional实战"></a>3-Optional实战</h2><h3 id="3-1-场景1"><a href="#3-1-场景1" class="headerlink" title="3.1-场景1"></a>3.1-场景1</h3><p>在service层中查询一个对象，返回之后判断是否为空并做处理</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查询一个对象</span></span><br><span class="line">Member member = memberService.selectByIdNo(request.getCertificateNo());</span><br><span class="line"><span class="comment">//使用ofNullable加orElseThrow做判断和操作</span></span><br><span class="line">Optional.ofNullable(member).orElseThrow(() -&gt; <span class="keyword">new</span> ServiceException(<span class="string">&quot;没有查询的相关数据&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="3-2-场景2"><a href="#3-2-场景2" class="headerlink" title="3.2-场景2"></a>3.2-场景2</h3><p>我们可以在dao接口层中定义返回值时就加上Optional 例如：我使用的是jpa，其他也同理</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">LocationRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Location</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"><span class="function">Optional&lt;Location&gt; <span class="title">findLocationById</span><span class="params">(String id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然在是Service中</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TerminalVO <span class="title">findById</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line"><span class="comment">//这个方法在dao层也是用了Optional包装了</span></span><br><span class="line">        Optional&lt;Terminal&gt; terminalOptional = terminalRepository.findById(id);</span><br><span class="line">        <span class="comment">//直接使用isPresent()判断是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (terminalOptional.isPresent()) &#123;</span><br><span class="line">        <span class="comment">//使用get()方法获取对象值</span></span><br><span class="line">            Terminal terminal = terminalOptional.get();</span><br><span class="line">            <span class="comment">//在实战中，我们已经免去了用set去赋值的繁琐，直接用BeanCopy去赋值</span></span><br><span class="line">            TerminalVO terminalVO = BeanCopyUtils.copyBean(terminal, TerminalVO.class);</span><br><span class="line">            <span class="comment">//调用dao层方法返回包装后的对象</span></span><br><span class="line">            Optional&lt;Location&gt; location = locationRepository.findLocationById(terminal.getLocationId());</span><br><span class="line">            <span class="keyword">if</span> (location.isPresent()) &#123;</span><br><span class="line">                terminalVO.setFullName(location.get().getFullName());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> terminalVO;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//不要忘记抛出异常</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ServiceException(<span class="string">&quot;该终端不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="4-Optional使用注意事项"><a href="#4-Optional使用注意事项" class="headerlink" title="4-Optional使用注意事项"></a>4-Optional使用注意事项</h2><p><strong>Optional真么好用，真的可以完全替代if判断吗？</strong></p><p>我想这肯定是大家使用完之后Optional之后可能会产生的想法，答案是否定的</p><p>举一个最简单的例子：</p><h3 id="4-1-例子"><a href="#4-1-例子" class="headerlink" title="4.1-例子"></a>4.1-例子</h3><p>如果我只想判断对象的某一个变量是否为空并且做出判断呢？</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person person=<span class="keyword">new</span> Person();</span><br><span class="line">person.setName(<span class="string">&quot;&quot;</span>);</span><br><span class="line">persion.setAge(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//普通判断</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(person.getName()))&#123;</span><br><span class="line">  <span class="comment">//名称不为空执行代码块</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用Optional做判断</span></span><br><span class="line">Optional.ofNullable(person).map(p -&gt; p.getName()).orElse(<span class="string">&quot;name为空&quot;</span>);</span><br></pre></td></tr></table></figure><p>我觉得这个例子就能很好的说明这个问题，只是一个很简单判断，如果用了Optional我们还需要考虑包装值，考虑代码书写，考虑方法调用，虽然只有一行，但是可读性并不好，如果别的程序员去读，我觉得肯定没有if看的明显.</p><h3 id="4-2-jdk1-9对Optional优化"><a href="#4-2-jdk1-9对Optional优化" class="headerlink" title="4.2-jdk1.9对Optional优化"></a>4.2-jdk1.9对Optional优化</h3><p>首先增加了三个方法:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">or()`、`ifPresentOrElse()` 和 `stream()</span><br></pre></td></tr></table></figure><p>or() 与orElse等方法相似，如果对象不为空返回对象，如果为空则返回or()方法中预设的值。</p><p>ifPresentOrElse() 方法有两个参数：一个 Consumer 和一个 Runnable。如果对象不为空，会执行 Consumer 的动作，否则运行 Runnable。相比ifPresent（）多了OrElse判断。</p><p>**stream()**将Optional转换成stream，如果有值就返回包含值的stream，如果没值，就返回空的stream。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">空白格</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lemon-cs.github.io/2020/04/02/Java%E4%B9%8BOptional%E4%BD%BF%E7%94%A8/">https://lemon-cs.github.io/2020/04/02/Java%E4%B9%8BOptional%E4%BD%BF%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lemon-cs.github.io" target="_blank">Lemon-CS</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post_share"><div class="social-share" data-image="https://static01.imgkr.com/temp/7e2ff0bcacb94fe1a60c065dd5773565.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/04/04/Java%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><img class="prev-cover" src="https://s3.bmp.ovh/imgs/2021/12/b7f532171b88483b.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java序列化和反序列化</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/01/Java%E5%8F%8D%E5%B0%84%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"><img class="next-cover" src="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java反射和实现原理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/05/11/BIONIOAIO/" title="BIO-NIO-AIO"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/adda988fb50270fe.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-11</div><div class="title">BIO-NIO-AIO</div></div></a></div><div><a href="/2020/02/29/Java%E4%B8%8ESpring%E6%B3%A8%E8%A7%A3%E7%AF%87/" title="Java与Spring注解篇"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/8ceea24ac1259251.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-29</div><div class="title">Java与Spring注解篇</div></div></a></div><div><a href="/2020/03/11/Java%E4%B9%8BIO/" title="Java之IO"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-11</div><div class="title">Java之IO</div></div></a></div><div><a href="/2020/03/27/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="Java函数式编程"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/adda988fb50270fe.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-27</div><div class="title">Java函数式编程</div></div></a></div><div><a href="/2020/07/01/Java%E5%8F%8D%E5%B0%84/" title="Java反射"><img class="cover" src="https://s3.bmp.ovh/imgs/2022/01/21be22e888bfda1d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-01</div><div class="title">Java反射</div></div></a></div><div><a href="/2020/04/01/Java%E5%8F%8D%E5%B0%84%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="Java反射和实现原理"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-01</div><div class="title">Java反射和实现原理</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NTAxNC8zMTQ4Mg=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./images/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">空白格</div><div class="author-info__description">杯中的水是亮闪闪的,海里的水是黑沉沉的!</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lemon-CS"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Lemon-CS" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:591930734@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到Lemon-CS</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java%E4%B9%8BOptional%E5%88%A4%E7%A9%BA"><span class="toc-text">Java之Optional判空</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFOptional%EF%BC%9F"><span class="toc-text">1-什么是Optional？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Optional%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-text">2-Optional对象创建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Optional-get-%E6%96%B9%E6%B3%95-%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%80%BC"><span class="toc-text">2.1-Optional.get()方法(返回对象的值)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Optional-isPresent-%E6%96%B9%E6%B3%95-%E5%88%A4%E8%AF%BB%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA"><span class="toc-text">2.2-Optional.isPresent()方法(判读是否为空)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Optional-ifPresent-%E6%96%B9%E6%B3%95-%E5%88%A4%E8%AF%BB%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA%E5%B9%B6%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0"><span class="toc-text">2.3-Optional.ifPresent()方法(判读是否为空并返回函数)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Optional-filter-%E6%96%B9%E6%B3%95-%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.4-Optional.filter()方法(过滤对象)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-Optional-map-%E6%96%B9%E6%B3%95-%E5%AF%B9%E8%B1%A1%E8%BF%9B%E8%A1%8C%E4%BA%8C%E6%AC%A1%E5%8C%85%E8%A3%85"><span class="toc-text">2.5- Optional.map()方法(对象进行二次包装)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-Optional-flatMap-%E6%96%B9%E6%B3%95-Optional%E5%AF%B9%E8%B1%A1%E8%BF%9B%E8%A1%8C%E4%BA%8C%E6%AC%A1%E5%8C%85%E8%A3%85"><span class="toc-text">2.6-Optional.flatMap()方法(Optional对象进行二次包装)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-Optional-orElse-%E6%96%B9%E6%B3%95-%E4%B8%BA%E7%A9%BA%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.7-Optional.orElse()方法(为空返回对象)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-Optional-orElseGet-%E6%96%B9%E6%B3%95-%E4%B8%BA%E7%A9%BA%E8%BF%94%E5%9B%9ESupplier%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.8-Optional.orElseGet()方法(为空返回Supplier对象)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-Optional-orElseThrow-%E6%96%B9%E6%B3%95-%E4%B8%BA%E7%A9%BA%E8%BF%94%E5%9B%9E%E5%BC%82%E5%B8%B8"><span class="toc-text">2.9-Optional.orElseThrow()方法(为空返回异常)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-%E7%9B%B8%E4%BC%BC%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90"><span class="toc-text">2.10-相似方法进行对比分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Optional%E5%AE%9E%E6%88%98"><span class="toc-text">3-Optional实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9C%BA%E6%99%AF1"><span class="toc-text">3.1-场景1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%9C%BA%E6%99%AF2"><span class="toc-text">3.2-场景2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Optional%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">4-Optional使用注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BE%8B%E5%AD%90"><span class="toc-text">4.1-例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-jdk1-9%E5%AF%B9Optional%E4%BC%98%E5%8C%96"><span class="toc-text">4.2-jdk1.9对Optional优化</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/12/03/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8Fcrontab%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/" title="Go语言实现分布式crontab任务系统"><img src="https://s3.bmp.ovh/imgs/2022/01/759f29a6471f2f3b.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Go语言实现分布式crontab任务系统"></a><div class="content"><a class="title" href="/2021/12/03/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8Fcrontab%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/" title="Go语言实现分布式crontab任务系统">Go语言实现分布式crontab任务系统</a><time datetime="2021-12-03T14:09:50.000Z" title="发表于 2021-12-03 22:09:50">2021-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/16/Go%E6%93%8D%E4%BD%9CMongoDB/" title="Go操作MongoDB"><img src="https://static01.imgkr.com/temp/b3efa980b23a40ad90a8f7739a0574da.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Go操作MongoDB"></a><div class="content"><a class="title" href="/2021/11/16/Go%E6%93%8D%E4%BD%9CMongoDB/" title="Go操作MongoDB">Go操作MongoDB</a><time datetime="2021-11-16T14:09:50.000Z" title="发表于 2021-11-16 22:09:50">2021-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/07/18/Java%E5%86%85%E7%9C%81%E6%9C%BA%E5%88%B6/" title="Java内省机制"><img src="https://s3.bmp.ovh/imgs/2021/12/adda988fb50270fe.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Java内省机制"></a><div class="content"><a class="title" href="/2020/07/18/Java%E5%86%85%E7%9C%81%E6%9C%BA%E5%88%B6/" title="Java内省机制">Java内省机制</a><time datetime="2020-07-18T09:20:41.000Z" title="发表于 2020-07-18 17:20:41">2020-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/07/16/MyBatis%E4%B9%8B%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%BA%94%E7%94%A8/" title="MyBatis之相关概念和基本应用-2&amp;3"><img src="https://static01.imgkr.com/temp/f64b83005c0248dca40c71705366ac18.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="MyBatis之相关概念和基本应用-2&amp;3"></a><div class="content"><a class="title" href="/2020/07/16/MyBatis%E4%B9%8B%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%BA%94%E7%94%A8/" title="MyBatis之相关概念和基本应用-2&amp;3">MyBatis之相关概念和基本应用-2&amp;3</a><time datetime="2020-07-16T06:31:42.000Z" title="发表于 2020-07-16 14:31:42">2020-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/07/14/Mybatis%E4%B9%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%81%E4%B9%85%E5%8C%96%E6%A1%86%E6%9E%B6/" title="MyBatis之自定义持久化框架-1"><img src="https://s3.bmp.ovh/imgs/2021/12/145436554af6720c.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="MyBatis之自定义持久化框架-1"></a><div class="content"><a class="title" href="/2020/07/14/Mybatis%E4%B9%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%81%E4%B9%85%E5%8C%96%E6%A1%86%E6%9E%B6/" title="MyBatis之自定义持久化框架-1">MyBatis之自定义持久化框架-1</a><time datetime="2020-07-14T06:31:42.000Z" title="发表于 2020-07-14 14:31:42">2020-07-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 空白格</div><div class="footer_custom_text">欢迎来到Lemon-CS</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere(){var e,t,o,r;"object"==typeof LivereTower?window.LivereTower.init():(e=document,t="script",r=e.getElementsByTagName(t)[0],"function"!=typeof LivereTower&&((o=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",o.async=!0,r.parentNode.insertBefore(o,r)))}{function loadOtherComment(){loadLivere()}loadLivere()}</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];pjaxSelectors.unshift('meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]');var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>