<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringMVC之基础应用-1 | Lemon-CS</title><meta name="keywords" content="SpringMVC"><meta name="author" content="空白格"><meta name="copyright" content="空白格"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SpringMVC基础应用，工作流程，restful支持以及json交互"><meta property="og:type" content="article"><meta property="og:title" content="SpringMVC之基础应用-1"><meta property="og:url" content="https://lemon-cs.github.io/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/index.html"><meta property="og:site_name" content="Lemon-CS"><meta property="og:description" content="SpringMVC基础应用，工作流程，restful支持以及json交互"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg"><meta property="article:published_time" content="2020-08-05T06:32:50.000Z"><meta property="article:modified_time" content="2021-12-31T07:37:35.000Z"><meta property="article:author" content="空白格"><meta property="article:tag" content="Java"><meta property="article:tag" content="SpringMVC"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg"><link rel="shortcut icon" href="https://gitee.com/lemon-cs/images/raw/master/Blog.png"><link rel="canonical" href="https://lemon-cs.github.io/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:300},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: 空白格",link:"链接: ",source:"来源: Lemon-CS",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"SpringMVC之基础应用-1",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-12-31 15:37:35"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,c={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(c))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!o&&!a&&!c;if(void 0===t){if(a)activateLightMode();else if(o)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const i=saveToLocal.get("aside-status");void 0!==i&&("hide"===i?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const d=saveToLocal.get("global-font-size");void 0!==d&&document.documentElement.style.setProperty("--global-font-size",d+"px");const r=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};r(),document.addEventListener("pjax:complete",r)})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/constown/HexoCustomFile@0.0.4/dist/css/custom.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./images/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">70</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lemon-CS</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringMVC之基础应用-1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-05T06:32:50.000Z" title="发表于 2020-08-05 14:32:50">2020-08-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-31T07:37:35.000Z" title="更新于 2021-12-31 15:37:35">2021-12-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="SpringMVC之基础应用-1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Spring-MVC-应用"><a href="#1-Spring-MVC-应用" class="headerlink" title="1. Spring MVC 应用"></a>1. Spring MVC 应用</h1><h2 id="1-1-Spring-MVC-简介"><a href="#1-1-Spring-MVC-简介" class="headerlink" title="1.1 Spring MVC 简介"></a>1.1 Spring MVC 简介</h2><h3 id="1-三层架构"><a href="#1-三层架构" class="headerlink" title="1. 三层架构"></a>1. 三层架构</h3><p>我们的开发架构一般都是基于两种形式，一种是 C/S 架构，也就是客户端/服务器;另一种是 B/S 架构 ，也就是浏览器服务器。在 JavaEE 开发中，几乎全都是基于 B/S 架构的开发。那么在 B/S 架构中，系 统标准的三层架构包括:表现层、业务层、持久层。三层架构在我们的实际开发中使用的非常多，所以 我们课程中的案例也都是基于三层架构设计的。</p><p>三层架构中，每一层各司其职，接下来我们就说说每层都负责哪些方面:</p><ol><li><p><strong>表现层</strong> :<br>也就是我们常说的web 层。它负责接收客户端请求，向客户端响应结果，通常客户端使用http 协 议请求web 层，web 需要接收 http 请求，完成 http 响应。<br>表现层包括展示层和控制层:控制层负责接收请求，展示层负责结果的展示。 表现层依赖业务层，接收到客户端请求一般会调用业务层进行业务处理，并将处理结果响应给客户端。 表现层的设计一般都使用 MVC 模型。(MVC 是表现层的设计模型，和其他层没有关系)</p></li><li><p><strong>业务层</strong> :<br>也就是我们常说的 service 层。它负责业务逻辑处理，和我们开发项目的需求息息相关。web 层依赖业务层，但是业务层不依赖 web 层。 业务层在业务处理时可能会依赖持久层，如果要对数据持久化需要保证事务一致性。(也就是我们说的， 事务应该放到业务层来控制)</p></li><li><p><strong>持久层</strong> :<br>也就是我们是常说的 dao 层。负责数据持久化，包括数据层即数据库和数据访问层，数据库是对数据进 行持久化的载体，数据访问层是业务层和持久层交互的接口，业务层需要通过数据访问层将数据持久化 到数据库中。通俗的讲，持久层就是和数据库交互，对数据库表进行增删改查的。</p></li></ol><h3 id="2-MVC设计模式"><a href="#2-MVC设计模式" class="headerlink" title="2. MVC设计模式"></a>2. MVC设计模式</h3><p>MVC 全名是 Model View Controller，是 模型(model)-视图(view)-控制器(controller) 的缩写， 是一</p><p>种用于设计创建 Web 应用程序表现层的模式。MVC 中每个部分各司其职:</p><ul><li><p>Model(模型):模型包含业务模型和数据模型，数据模型用于封装数据，业务模型用于处理业务。</p></li><li><p>View(视图): 通常指的就是我们的 jsp 或者 html。作用一般就是展示数据的。通常视图是依据 模型数据创建的。</p></li><li><p>Controller(控制器): 是应用程序中处理用户交互的部分。作用一般就是处理程序逻辑的。 MVC提倡:每一层只编写自己的东⻄，不编写任何其他的代码;分层是为了解耦，解耦是为了维护方便和分工协作。</p></li></ul><h2 id="1-2-Spring-MVC-是什么？"><a href="#1-2-Spring-MVC-是什么？" class="headerlink" title="1.2 Spring MVC 是什么？"></a>1.2 Spring MVC 是什么？</h2><p>SpringMVC 全名叫 Spring Web MVC，是一种基于 Java 的实现 MVC 设计模型的请求驱动类型的轻量级</p><p>Web 框架，属于 SpringFrameWork 的后续产品。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1919001/1601141237758-0cb371df-18b4-4a2a-a2be-c5095606cd32.png"></p><p>SpringMVC 已经成为 目前最主流的 MVC 框架 之一，并且 随着 Spring3.0 的发布，全面超越 Struts2， 成为最优秀的 MVC 框架。</p><p>servlet、struts实现接口、springmvc中要让一个java类能够处理请求只需要添加注解就ok</p><p>它通过一套注解，让一个简单的 Java 类成为处理请求的控制器，而无须实现任何接口。同时它还支持 RESTful 编程⻛格的请求。</p><p>总之:Spring MVC和Struts2一样，都是 为了解决表现层问题 的web框架，它们都是基于 MVC 设计模 式的。而这些表现层框架的主要职责就是处理前端HTTP请求。</p><p>Spring MVC 本质可以认为是对servlet的封装，简化了我们serlvet的开发</p><p>作用:</p><ol><li>接收请求</li><li>返回响应</li><li>跳转⻚面</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1919001/1601141378433-80ec0eca-5f77-4c50-983d-27b2b24c94c0.png"></p><h2 id="1-3-pring-Web-MVC-工作流程"><a href="#1-3-pring-Web-MVC-工作流程" class="headerlink" title="1.3 pring Web MVC 工作流程"></a>1.3 pring Web MVC 工作流程</h2><p>开发过程</p><ol><li><p>配置DispatcherServlet前端控制器</p></li><li><p>开发处理具体业务逻辑的Handler(@Controller、@RequestMapping)</p></li><li><p>xml配置文件配置controller扫描，配置springmvc三大件</p></li><li><p>将xml文件路径告诉springmvc(DispatcherServlet)</p></li></ol><h3 id="1-Spring-MVC-请求处理流程"><a href="#1-Spring-MVC-请求处理流程" class="headerlink" title="1. Spring MVC 请求处理流程"></a>1. Spring MVC 请求处理流程</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1919001/1601141511631-8cfb0e4f-94c0-4de2-a053-7b141eb3b94f.png"></p><p><strong>流程说明</strong></p><ol><li><strong>第一步</strong>: 用户发送请求至前端控制器DispatcherServlet</li><li><strong>第二步</strong>: DispatcherServlet收到请求调用HandlerMapping处理器映射器</li><li><strong>第三步</strong>: 处理器映射器根据请求Url找到具体的Handler(后端控制器)，生成处理器对象及处理器拦截 器(如果 有则生成)一并返回DispatcherServlet</li><li><strong>第四步</strong>: DispatcherServlet调用HandlerAdapter处理器适配器去调用Handler</li><li><strong>第五步</strong>: 处理器适配器执行Handler</li><li><strong>第六步</strong>: Handler执行完成给处理器适配器返回ModelAndView</li><li><strong>第七步</strong>: 处理器适配器向前端控制器返回 ModelAndView，ModelAndView 是SpringMVC 框架的一个 底层对 象，包括 Model 和 View</li><li><strong>第八步</strong>: 前端控制器请求视图解析器去进行视图解析，根据逻辑视图名来解析真正的视图。</li><li><strong>第九步</strong>:视图解析器向前端控制器返回View</li><li><strong>第十步</strong>: 前端控制器进行视图渲染，就是将模型数据(在 ModelAndView 对象中)填充到 request 域 第十一步:前端控制器向用户响应结果</li></ol><h3 id="2-Spring-MVC-九大组件"><a href="#2-Spring-MVC-九大组件" class="headerlink" title="2. Spring MVC 九大组件"></a>2. Spring MVC 九大组件</h3><ul><li><code>HandlerMapping(处理器映射器)</code></li></ul><p>HandlerMapping 是用来查找 Handler 的，也就是处理器，具体的表现形式可以是类，也可以是 方法。比如，标注了@RequestMapping的每个方法都可以看成是一个Handler。Handler负责具 体实际的请求处理，在请求到达后，HandlerMapping 的作用便是找到请求相应的处理器 Handler 和 Interceptor.</p><ul><li><code>HandlerAdapter(处理器适配器)</code></li></ul><p>HandlerAdapter 是一个适配器。因为 Spring MVC 中 Handler 可以是任意形式的，只要能处理请 求即可。但是把请求交给 Servlet 的时候，由于 Servlet 的方法结构都是 doService(HttpServletRequest req,HttpServletResponse resp)形式的，要让固定的 Servlet 处理 方法调用 Handler 来进行处理，便是 HandlerAdapter 的职责。</p><ul><li><code>HandlerExceptionResolver</code></li></ul><p>HandlerExceptionResolver 用于处理 Handler 产生的异常情况。它的作用是根据异常设置ModelAndView，之后交给渲染方法进行渲染，渲染方法会将 ModelAndView 渲染成⻚面。</p><ul><li><code>ViewResolver</code></li></ul><p>ViewResolver即视图解析器，用于将String类型的视图名和Locale解析为View类型的视图，只有一 个resolveViewName()方法。从方法的定义可以看出，Controller层返回的String类型视图名 viewName 最终会在这里被解析成为View。View是用来渲染⻚面的，也就是说，它会将程序返回 的参数和数据填入模板中，生成html文件。ViewResolver 在这个过程主要完成两件事情: ViewResolver 找到渲染所用的模板(第一件大事)和所用的技术(第二件大事，其实也就是找到 视图的类型，如JSP)并填入参数。默认情况下，Spring MVC会自动为我们配置一个 InternalResourceViewResolver,是针对 JSP 类型视图的。</p><ul><li><code>RequestToViewNameTranslator</code></li></ul><p>RequestToViewNameTranslator 组件的作用是从请求中获取 ViewName.因为 ViewResolver 根据 ViewName 查找 View，但有的 Handler 处理完成之后,没有设置 View，也没有设置 ViewName， 便要通过这个组件从请求中查找 ViewName。</p><ul><li><code>LocaleResolver</code></li></ul><p>ViewResolver 组件的 resolveViewName 方法需要两个参数，一个是视图名，一个是 Locale。 LocaleResolver 用于从请求中解析出 Locale，比如中国 Locale 是 zh-CN，用来表示一个区域。这 个组件也是 i18n 的基础。</p><ul><li><code>ThemeResolver</code></li></ul><p>ThemeResolver 组件是用来解析主题的。主题是样式、图片及它们所形成的显示效果的集合。 Spring MVC 中一套主题对应一个 properties文件，里面存放着与当前主题相关的所有资源，如图 片、CSS样式等。创建主题非常简单，只需准备好资源，然后新建一个“主题名.properties”并将资 源设置进去，放在classpath下，之后便可以在⻚面中使用了。SpringMVC中与主题相关的类有 ThemeResolver、ThemeSource和Theme。ThemeResolver负责从请求中解析出主题名， ThemeSource根据主题名找到具体的主题，其抽象也就是Theme，可以通过Theme来获取主题和 具体的资源。</p><ul><li><code>MultipartResolver</code></li></ul><p>MultipartResolver 用于上传请求，通过将普通的请求包装成 MultipartHttpServletRequest 来实 现。MultipartHttpServletRequest 可以通过 getFile() 方法 直接获得文件。如果上传多个文件，还 可以调用 getFileMap()方法得到Map&lt;FileName，File&gt;这样的结构，MultipartResolver 的作用就 是封装普通的请求，使其拥有文件上传的功能。</p><ul><li><code>FlashMapManager</code></li></ul><p>FlashMap 用于重定向时的参数传递，比如在处理用户订单时候，为了避免重复提交，可以处理完 post请求之后重定向到一个get请求，这个get请求可以用来显示订单详情之类的信息。这样做虽然 可以规避用户重新提交订单的问题，但是在这个⻚面上要显示订单的信息，这些数据从哪里来获得 呢?因为重定向时么有传递参数这一功能的，如果不想把参数写进URL(不推荐)，那么就可以通 过FlashMap来传递。只需要在重定向之前将要传递的数据写入请求(可以通过ServletRequestAttributes.getRequest()方法获得)的属性OUTPUT_FLASH_MAP_ATTRIBUTE 中，这样在重定向之后的Handler中Spring就会自动将其设置到Model中，在显示订单信息的⻚面 上就可以直接从Model中获取数据。FlashMapManager 就是用来管理 FalshMap 的。</p><h2 id="1-4-请求参数绑定"><a href="#1-4-请求参数绑定" class="headerlink" title="1.4 请求参数绑定"></a>1.4 请求参数绑定</h2><ul><li>SpringMVC在接收整型参数的时候，直接在Handler方法中声明形参即可</li></ul><p>参数绑定:取出参数值绑定到handler方法的形参上</p><ul><li>默认支持 Servlet API 作为方法参数</li></ul><p>当需要使用<code>HttpServletRequest</code>、<code>HttpServletResponse</code>、<code>HttpSession</code>等原生servlet对象时，直 接在handler方法中形参声明使用即可。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* SpringMVC 对原生servlet api的支持 url:/demo/handle02?id=1</span></span><br><span class="line"><span class="comment">* 如果要在SpringMVC中使用servlet原生对象，比如</span></span><br><span class="line"><span class="comment">* HttpServletRequest\HttpServletResponse\HttpSession，直接在Handler方法形参中声明使用即可</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle02&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle02</span><span class="params">(HttpServletRequest request,HttpServletResponse response,HttpSession session)</span> </span>&#123;</span><br><span class="line">    String id = request.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;date&quot;</span>,date);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定简单类型参数</li></ul><p>简单数据类型:八种基本数据类型及其包装类型 参数类型推荐使用包装数据类型，因为基础数据类型不可以为null 整型:Integer、int</p><p>字符串:String</p><p>单精度:Float、float</p><p>双精度:Double、double</p><p>布尔型:Boolean、boolean 说明:对于布尔类型的参数，请求的参数值为true或false。或者1或0</p><p>注意:绑定简单数据类型参数，只需要直接声明形参即可(形参参数名和传递的参数名要保持一 致，建议 使用包装类型，当形参参数名和传递参数名不一致时可以使用@RequestParam注解进行 手动映射)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* SpringMVC 接收简单数据类型参数 url:/demo/handle03?id=1</span></span><br><span class="line"><span class="comment">* 注意:接收简单数据类型参数，直接在handler方法的形参中声明即可，框架会取出参数值然后绑定到对应参数上</span></span><br><span class="line"><span class="comment">* 要求:传递的参数名和声明的形参名称保持一致 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle03&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle03</span><span class="params">(<span class="meta">@RequestParam(&quot;ids&quot;)</span> Integer id,Boolean flag)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;date&quot;</span>,date);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定Pojo类型参数</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* SpringMVC接收pojo类型参数 url:/demo/handle04?id=1&amp;username=zhangsan</span></span><br><span class="line"><span class="comment">* 接收pojo类型参数，直接形参声明即可，类型就是Pojo的类型，形参名无所谓</span></span><br><span class="line"><span class="comment">* 但是要求传递的参数名必须和Pojo的属性名保持一致</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle04&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle04</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;date&quot;</span>,date);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定Pojo包装对象参数</li></ul><p>包装类型 QueryVo</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String mail;</span><br><span class="line">    <span class="keyword">private</span> String phone; <span class="comment">// 嵌套了另外的Pojo对象</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Handler方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* SpringMVC接收pojo包装类型参数 url:/demo/handle05?user.id=1&amp;user.username=zhangsan</span></span><br><span class="line"><span class="comment">* 不管包装Pojo与否，它首先是一个pojo，那么就可以按照上述pojo的要求来</span></span><br><span class="line"><span class="comment">* 1、绑定时候直接形参声明即可</span></span><br><span class="line"><span class="comment">* 2、传参参数名和pojo属性保持一致，如果不能够定位数据项，那么通过属性名 + &quot;.&quot; 的方式进一步锁定数据</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle05&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle05</span><span class="params">(QueryVo queryVo)</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;date&quot;</span>,date);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定日期类型参数(需要配置自定义类型转换器)</li></ul><p>前端jsp</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>测试用例:SpringMVC接收日期类型参数<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/demo/handle06?birthday=2019-10-08&quot;</span>&gt;</span>点击测试<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后台Handler方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 绑定日期类型参数</span></span><br><span class="line"><span class="comment">* 定义一个SpringMVC的类型转换器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle06&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle06</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;date&quot;</span>,date);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义类型转换器</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 自定义类型转换器</span></span><br><span class="line"><span class="comment">* S:source，源类型</span></span><br><span class="line"><span class="comment">* T:target:目标类型 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 完成字符串向日期的转换</span></span><br><span class="line">        SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Date parse = simpleDateFormat.parse(source);</span><br><span class="line">            <span class="keyword">return</span> parse;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注册自定义类型转换器</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自动注册最合适的处理器映射器，处理器适配器(调用handler方法) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionServiceBean&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--注册自定义类型转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionServiceBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.lagou.edu.converter.DateConverter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-5-对-Restful-⻛格请求支持"><a href="#1-5-对-Restful-⻛格请求支持" class="headerlink" title="1.5 对 Restful ⻛格请求支持"></a>1.5 对 Restful ⻛格请求支持</h2><ul><li>rest⻛格请求是什么样的?</li><li>springmvc对rest⻛格请求到底提供了怎样的支持</li></ul><p>是一个注解的使用@PathVariable，可以帮助我们从uri中取出参数</p><h3 id="1-什么是-RESTful"><a href="#1-什么是-RESTful" class="headerlink" title="1. 什么是 RESTful"></a>1. 什么是 RESTful</h3><p>Restful 是一种 web 软件架构⻛格，它不是标准也不是协议，它倡导的是一个资源定位及资源操作的⻛格。</p><p><strong>什么是 REST:</strong></p><p>REST(英文:Representational State Transfer，简称 REST)描述了一个架构样式的网络系统， 比如 web 应用程序。它首次出现在 2000 年 Roy Fielding 的博士论文中，他是 HTTP 规范的主要编写者之 一。在目前主流的三种 Web 服务交互方案中，REST 相比于 SOAP(Simple Object Access protocol， 简单对象访问协议)以及 XML-RPC 更加简单明了，无论是对 URL 的处理还是对 Payload 的编码，REST 都倾向于用更加简单轻量的方法设计和实现。值得注意的是 REST 并没有一个明确的标准，而更像 是一种设计的⻛格。</p><p>它本身并没有什么实用性，其核心价值在于如何设计出符合 REST ⻛格的网络接口。</p><p><strong>资源</strong> 表现层 状态转移</p><p><strong>Restful 的优点</strong></p><p>它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用。</p><p><strong>Restful 的特性</strong></p><p>资源(Resources):网络上的一个实体，或者说是网络上的一个具体信息。</p><p>它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的存在。可以用一个 URI(统 一资源定位符)指向它，每种资源对应一个特定的 URI 。要获取这个资源，访问它的 URI 就可以，因此 URI 即为每一个资源的独一无二的识别符。</p><p>表现层(Representation):把资源具体呈现出来的形式，叫做它的表现层 (Representation)。比 如，文本可以用 txt 格式表现，也可以用 HTML 格式、XML 格式、JSON 格式表现，甚至可以采用二进 制格式。</p><p>状态转化(State Transfer):每发出一个请求，就代表了客户端和服务器的一次交互过程。</p><p>HTTP 协议，是一个无状态协议，即所有的状态都保存在服务器端。因此，如果客户端想要操作服务 器， 必须通过某种手段，让服务器端发生“状态转化”(State Transfer)。而这种转化是建立在表现层 之上的，所以就是 “ 表现层状态转化” 。具体说， 就是 HTTP 协议里面，四个表示操作方式的动词: GET 、POST 、PUT 、DELETE 。它们分别对应四种基本操作:GET 用来获取资源，POST 用来新建资 源，PUT 用来更新资源，DELETE 用来删除资源。</p><p><strong>RESTful 的示例</strong>: rest是一个url请求的⻛格，基于这种⻛格设计请求的url 没有rest的话，原有的url设计 <a target="_blank" rel="noopener" href="http://localhost:8080/user/queryUserById.action?id=3">http://localhost:8080/user/queryUserById.action?id=3</a> url中定义了动作(操作)，参数具体锁定到操作的是谁</p><p>有了rest⻛格之后 rest中，认为互联网中的所有东⻄都是资源，既然是资源就会有一个唯一的uri标识它，代表它 <a target="_blank" rel="noopener" href="http://localhost:8080/user/3">http://localhost:8080/user/3</a> 代表的是id为3的那个用户记录(资源) 锁定资源之后如何操作它呢?常规操作就是增删改查 根据请求方式不同，代表要做不同的操作</p><p>get 查询，获取资源</p><p>post 增加，新建资源</p><p>put 更新</p><p>delete 删除资源</p><p>rest⻛格带来的直观体现:就是传递参数方式的变化，参数可以在uri中了</p><p>/account/1 HTTP GET :得到 id = 1 的 account</p><p>/account/1 HTTP DELETE:删除 id = 1 的 account</p><p>/account/1 HTTP PUT:更新 id = 1 的 account</p><p>URL:资源定位符，通过URL地址去定位互联网中的资源(抽象的概念，比如图片、视频、app服务 等)。</p><p><strong>RESTful ⻛格 URL</strong>:互联网所有的事物都是资源，要求URL中只有表示资源的名称，没有动词。 RESTful⻛格资源操作:使用HTTP请求中的method方法put、delete、post、get来操作资源。分别对应添加、删除、修改、查询。不过一般使用时还是 post 和 get。put 和 delete几乎不使用。</p><p><strong>RESTful ⻛格资源表述</strong>:可以根据需求对URL定位的资源返回不同的表述(也就是返回数据类型，比如XML、JSON等数据格式)。</p><p>Spring MVC 支持 RESTful ⻛格请求，具体讲的就是使用 @PathVariable 注解获取 RESTful ⻛格的请求URL中的路径变量。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1919001/1601142626908-ddfbab96-23a7-4663-9a86-d7c1e9ed8253.png"></p><p><strong>示例代码：</strong></p><p>前端jsp代码:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>SpringMVC对Restful⻛格url的支持<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>测试用例:SpringMVC对Restful⻛格url的支持<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/demo/handle/15&quot;</span>&gt;</span>rest_get测试<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/demo/handle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交rest_post请求&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/demo/handle/15/lisi&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交rest_put请求&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/demo/handle/15&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交rest_delete请求&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后台handler方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/handle/&#123;id&#125;&quot;,method =    &#123;RequestMethod.GET&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleGet</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/handle&quot;,method = &#123;RequestMethod.POST&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handlePost</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/handle/&#123;id&#125;/&#123;name&#125;&quot;,method =  &#123;RequestMethod.PUT&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handlePut</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,<span class="meta">@PathVariable(&quot;name&quot;)</span> String username)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/handle/&#123;id&#125;&quot;,method =  &#123;RequestMethod.DELETE&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleDelete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>web.xml中配置请求方式过滤器 (将特定的post请求转换为put和delete请求)</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置springmvc请求方式转换过滤器，会检查请求参数中是否有_method参数，如果有就 按照指定的请求方式进行转换--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-</span><br><span class="line">class&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-6-Ajax-Json交互"><a href="#1-6-Ajax-Json交互" class="headerlink" title="1.6 Ajax Json交互"></a>1.6 Ajax Json交互</h2><p>交互:两个方向</p><ol><li><p>前端到后台:前端ajax发送json格式字符串，后台直接接收为pojo参数，使用注解<code>@RequstBody</code></p></li><li><p>后台到前端:后台直接返回pojo对象，前端直接接收为json对象或者字符串，使用注解 <code>@ResponseBody</code></p></li></ol><h3 id="1-什么是-Json"><a href="#1-什么是-Json" class="headerlink" title="1. 什么是 Json"></a>1. 什么是 Json</h3><p>Json是一种与语言无关的数据交互格式，就是一种字符串，只是用特殊符号{}内表示对象、[]内表示数</p><p>组、””内是属性或值、:表示后者是前者的值</p><p>{“name”: “Michael”}可以理解为是一个包含name为Michael的对象 [{“name”: “Michael”},{“name”: “Jerry”}]就表示包含两个对象的数组</p><h3 id="2-ResponseBody注解"><a href="#2-ResponseBody注解" class="headerlink" title="2. @ResponseBody注解"></a>2. @ResponseBody注解</h3><p><code>@ResponseBody</code>注解的作用是将controller的方法返回的对象通过适当的转换器转换为指定的格式之 后，写入到response对象的body区，通常用来返回JSON数据或者是XML数据。 注意:在使用此注解之 后不会再走视图处理器，而是直接将数据写入到输入流中，他的效果等同于通过response对象输出指定 格式的数据。</p><h3 id="3-分析Spring-MVC-使用-Json-交互"><a href="#3-分析Spring-MVC-使用-Json-交互" class="headerlink" title="3. 分析Spring MVC 使用 Json 交互"></a>3. 分析Spring MVC 使用 Json 交互</h3><p>添加所需jar包</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--json数据交互所需jar，start--&gt;</span> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--json数据交互所需jar，end--&gt;</span></span><br></pre></td></tr></table></figure><p>前端jsp⻚面及js代码</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Ajax json交互<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ajaxBtn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ajax提交&quot;</span>/&gt;</span> <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&quot;#ajaxBtn&quot;</span>).bind(<span class="string">&quot;click&quot;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 发送ajax请求 </span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/demo/handle07&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="string">&#x27;&#123;&quot;id&quot;:&quot;1&quot;,&quot;name&quot;:&quot;李四&quot;&#125;&#x27;</span>,</span><br><span class="line">      <span class="attr">contentType</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>, <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        alert(data.name);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;) </span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>后台handler方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle07&quot;)</span></span><br><span class="line"><span class="comment">// 添加@ResponseBody之后，不再走视图解析器那个流程，而是等同于response直接输出数据</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">handle07</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 业务逻辑处理，修改name为张三丰 </span></span><br><span class="line">    user.setName(<span class="string">&quot;张三丰&quot;</span>); </span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">空白格</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lemon-cs.github.io/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/">https://lemon-cs.github.io/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lemon-cs.github.io" target="_blank">Lemon-CS</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/SpringMVC/">SpringMVC</a></div><div class="post_share"><div class="social-share" data-image="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/08/06/SpringMVC%E4%B9%8B%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8/"><img class="prev-cover" src="https://s4.ax1x.com/2022/02/15/HRSzD0.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringMVC之高级应用-2</div></div></a></div><div class="next-post pull-right"><a href="/2020/08/04/Spring%E4%B9%8BAOP%E5%BA%94%E7%94%A8/"><img class="next-cover" src="https://static01.imgkr.com/temp/31d9be0ee4fc43549ffe1bd007bc4e59.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring之AOP应用-6</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/08/06/SpringMVC%E4%B9%8B%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8/" title="SpringMVC之高级应用-2"><img class="cover" src="https://s4.ax1x.com/2022/02/15/HRSzD0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-06</div><div class="title">SpringMVC之高级应用-2</div></div></a></div><div><a href="/2020/05/11/BIONIOAIO/" title="BIO-NIO-AIO"><img class="cover" src="https://static01.imgkr.com/temp/31d9be0ee4fc43549ffe1bd007bc4e59.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-11</div><div class="title">BIO-NIO-AIO</div></div></a></div><div><a href="/2020/02/29/Java%E4%B8%8ESpring%E6%B3%A8%E8%A7%A3%E7%AF%87/" title="Java与Spring注解篇"><img class="cover" src="https://static01.imgkr.com/temp/7e2ff0bcacb94fe1a60c065dd5773565.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-29</div><div class="title">Java与Spring注解篇</div></div></a></div><div><a href="/2020/03/11/Java%E4%B9%8BIO/" title="Java之IO"><img class="cover" src="https://s4.ax1x.com/2022/02/15/HRSg4e.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-11</div><div class="title">Java之IO</div></div></a></div><div><a href="/2020/04/02/Java%E4%B9%8BOptional%E4%BD%BF%E7%94%A8/" title="Java之Optional使用"><img class="cover" src="https://s3.bmp.ovh/imgs/2021/12/a560e450dd631e8f.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-02</div><div class="title">Java之Optional使用</div></div></a></div><div><a href="/2020/03/27/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="Java函数式编程"><img class="cover" src="https://s4.ax1x.com/2022/02/15/HRpxRH.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-27</div><div class="title">Java函数式编程</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NTAxNC8zMTQ4Mg=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./images/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">空白格</div><div class="author-info__description">杯中的水是亮闪闪的,海里的水是黑沉沉的!</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">70</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lemon-CS"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Lemon-CS" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:591930734@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到Lemon-CS</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring-MVC-%E5%BA%94%E7%94%A8"><span class="toc-text">1. Spring MVC 应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Spring-MVC-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1 Spring MVC 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-text">1. 三层架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">2. MVC设计模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Spring-MVC-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">1.2 Spring MVC 是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-pring-Web-MVC-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">1.3 pring Web MVC 工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Spring-MVC-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="toc-text">1. Spring MVC 请求处理流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Spring-MVC-%E4%B9%9D%E5%A4%A7%E7%BB%84%E4%BB%B6"><span class="toc-text">2. Spring MVC 九大组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="toc-text">1.4 请求参数绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%AF%B9-Restful-%E2%BB%9B%E6%A0%BC%E8%AF%B7%E6%B1%82%E6%94%AF%E6%8C%81"><span class="toc-text">1.5 对 Restful ⻛格请求支持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-RESTful"><span class="toc-text">1. 什么是 RESTful</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-Ajax-Json%E4%BA%A4%E4%BA%92"><span class="toc-text">1.6 Ajax Json交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-Json"><span class="toc-text">1. 什么是 Json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ResponseBody%E6%B3%A8%E8%A7%A3"><span class="toc-text">2. @ResponseBody注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%86%E6%9E%90Spring-MVC-%E4%BD%BF%E7%94%A8-Json-%E4%BA%A4%E4%BA%92"><span class="toc-text">3. 分析Spring MVC 使用 Json 交互</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/12/30/Netty%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E8%A7%A3/" title="Netty知识点详解"><img src="https://s3.bmp.ovh/imgs/2021/12/b7f532171b88483b.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Netty知识点详解"></a><div class="content"><a class="title" href="/2021/12/30/Netty%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E8%A7%A3/" title="Netty知识点详解">Netty知识点详解</a><time datetime="2021-12-30T06:31:42.000Z" title="发表于 2021-12-30 14:31:42">2021-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/28/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8Fcrontab%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/" title="Go语言实现分布式crontab任务系统"><img src="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Go语言实现分布式crontab任务系统"></a><div class="content"><a class="title" href="/2021/12/28/Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8Fcrontab%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/" title="Go语言实现分布式crontab任务系统">Go语言实现分布式crontab任务系统</a><time datetime="2021-12-28T14:09:50.000Z" title="发表于 2021-12-28 22:09:50">2021-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/26/Go%E6%93%8D%E4%BD%9CMongoDB/" title="Go操作MongoDB"><img src="https://s3.bmp.ovh/imgs/2021/12/2de6481e0a4697bf.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Go操作MongoDB"></a><div class="content"><a class="title" href="/2021/12/26/Go%E6%93%8D%E4%BD%9CMongoDB/" title="Go操作MongoDB">Go操作MongoDB</a><time datetime="2021-12-26T14:09:50.000Z" title="发表于 2021-12-26 22:09:50">2021-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/06/SpringMVC%E4%B9%8B%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8/" title="SpringMVC之高级应用-2"><img src="https://s4.ax1x.com/2022/02/15/HRSzD0.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="SpringMVC之高级应用-2"></a><div class="content"><a class="title" href="/2020/08/06/SpringMVC%E4%B9%8B%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8/" title="SpringMVC之高级应用-2">SpringMVC之高级应用-2</a><time datetime="2020-08-06T06:32:50.000Z" title="发表于 2020-08-06 14:32:50">2020-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/" title="SpringMVC之基础应用-1"><img src="https://s3.bmp.ovh/imgs/2021/12/468eb316ff103180.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="SpringMVC之基础应用-1"></a><div class="content"><a class="title" href="/2020/08/05/SpringMVC%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/" title="SpringMVC之基础应用-1">SpringMVC之基础应用-1</a><time datetime="2020-08-05T06:32:50.000Z" title="发表于 2020-08-05 14:32:50">2020-08-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 空白格</div><div class="footer_custom_text">欢迎来到Lemon-CS</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere(){var e,t,o,r;"object"==typeof LivereTower?window.LivereTower.init():(e=document,t="script",r=e.getElementsByTagName(t)[0],"function"!=typeof LivereTower&&((o=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",o.async=!0,r.parentNode.insertBefore(o,r)))}{function loadOtherComment(){loadLivere()}loadLivere()}</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];pjaxSelectors.unshift('meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]');var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>